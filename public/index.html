<!DOCTYPE html>
<html>
<head>
    <title>Earthquake Simulator</title>
    <style>
        body { margin: 0; overflow: hidden; }
    </style>
</head>
<body>
    <div style="background-color: black; height: 1vh; margin-top: 35vh;" id="normal"></div>
    <div style="background-color: red; height: 20vh; width: 40vw; margin: auto; left: 50%; transform: translate(-50%, -50%); position: absolute; font-size: 3rem; font-weight: 900;"
        id="object">By: Sanjith, Anirudh and Viswa</div>

    <canvas id="seismograph" style="position: fixed; bottom: 0; left: 0; width: 100%; height: 200px; background: #222; border-top: 3px solid #fff;"></canvas>

    <script>
        const object = document.getElementById("object");
        const canvas = document.getElementById("seismograph");
        const ctx = canvas.getContext("2d");
        canvas.width = window.innerWidth;
        canvas.height = 200;
        
        let xOffset = 0;
        let yBase = canvas.height / 2;
        let movement = 0;
        let prevX = 0, prevY = 0;
        let waveData = [];

        function followMouse(event) {
            let dx = event.clientX - prevX;
            let dy = event.clientY - prevY;
            movement = Math.sqrt(dx * dx + dy * dy);
            prevX = event.clientX;
            prevY = event.clientY;
            var viewportHeight = window.innerHeight;
            var normalTopVH = (normal.offsetTop / viewportHeight) * 100;    

            var minYVH = normalTopVH - 20;
            var maxYVH = normalTopVH + 20;

            var yVH = (event.clientY / viewportHeight) * 100;
            yVH = Math.max(minYVH, Math.min(yVH, maxYVH));

            object.style.top = yVH + "vh";
        }

        function drawSeismograph() {
            ctx.fillStyle = "#222";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.strokeStyle = "#0f0";
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            if (waveData.length > canvas.width) {
                waveData.shift();
            }

            waveData.push(yBase - movement * 5);

            ctx.moveTo(0, waveData[0]);
            for (let i = 1; i < waveData.length; i++) {
                ctx.lineTo(i, waveData[i]);
            }
            ctx.stroke();
            
            xOffset++;
        }


        setInterval(drawSeismograph, 1000 / 60);
        document.addEventListener("mousemove", followMouse);
    </script>
</body>
</html>